## 一、前言

![](http://drools.itstack.org/assets/img/2020/doools-1.2-00.png)

你见过这样的代码嘛？类似的呢？嗯，那么恭喜你被这个世界温柔以待！

```if else```，并不是一个非常坏的关键字，只不过有人把他用坏了。尤其在接到产品需求如下这样；

| 日期 | 需求 | 紧急程度 |  程序员(话外音) |
|:---:|:---|:---|:---|
| 星期一.早上 | 猿哥哥，老板说要搞一下营销拉拉量，给男生女生发不同的优惠券，促活消费。 | 很紧急，下班就要 |  行吧，也不难，加下判断就上线 |
| 星期二.下午 | 小哥哥，咱们上线后非常好。要让咱们按照年轻、中年、成年，不同年龄加下判断，准确刺激消费。 | 超紧急，明天就要 | 也不难，加就加吧 |
| 星期三.晚上 | 喂，小哥哥！睡了吗！老板说咱们这次活动很成功，可以不可以在细分下，把单身、结婚、有娃的都加上不同判断。这样更能刺激用户消费。 | 贼紧急，最快上线。 | 已经意识到```ifelse```越来越多了 |
| 星期四.凌晨 | 哇！小哥哥你们太棒了，上的真快。嘻嘻！有个小请求，需要调整下年龄段，因为现在学生处对象的都比较早，有对象的更容易买某某某东西。要改下值！辛苦辛苦！ | 老板，在等着呢！ |  一大片的值要修改，哎！这么多```ifelse```了 |
| 星期五.半夜 | 歪歪喂！小哥哥，坏了，怎么发的优惠券不对了，有客诉了，很多女生都来投诉。你快看看。老板，他... | (一头汗)，哎，值粘错位置了！ | 终究还是一个人扛下了所有 |

这样的场景你是否有遇到过呢，那么是产品给你代沟里去了，还是你把项目带沟里去了。可能会觉得，这东西这么着急要，我也没办法呀。其实不止你没有办法，是为了打下市场，让每一个人都很匆忙。只有合理的评估、铺垫、架设，才会不断满足业务需求、产品形态的变化。否则往后的路越来越难！

## 二、场景

对于上面所提到的这种场景，在我们实际开发中是经常会遇到的。尤其是在一些；营销、风控、人群等，各种用户信息决策树关系时，都会出现这样的业务逻辑。而且对于一些较大场景是肯定不会直接硬编码```if else```，因为太难以维护。当然除非你这东西就写一次用一次，下次不用了那无所谓。

接下来我们把上面的场景进行转换一种树结构图，依次来体现出这个需求的全貌，如下；

![](http://drools.itstack.org/assets/img/2020/doools-1.2-01.png)

- 



